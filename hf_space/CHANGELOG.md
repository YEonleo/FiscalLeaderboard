# Fiscal Leaderboard 변경 이력

## v2.0 (2026-02-04) - 전면 개편

### 🎯 주요 개선 사항

#### 1. 모델 구분 문제 해결 ✅
**문제**: Qwen 모델들이 동일명으로 표시되어 버전/파라미터 구분 불가

**해결**:
- `smart_label()` 함수 개선으로 모델명 전체 표시
- Qwen2.5-7B, Qwen3-8B, Qwen3-14B 등 명확히 구분
- 정규표현식으로 버전과 파라미터 크기 추출
- 차트 레이블 길이 제한 확대 (labelLimit: 120)

#### 2. 리더보드 테이블 구조 개선 ✅
**기존**: 제출플랫폼, 파라미터, 한국어 사전학습, 개정세법 종합, CPA 종합

**개선**:
- **순위** | **모델명** | **세법종합** | **개정세법2021** | **개정세법2022** | **개정세법2023** | **CPA종합** | **CPA세법** | **CPA경제원론** | **CPA경영학**
- 점수를 백분율(%)로 표시하여 직관성 향상
- 메타정보(플랫폼, 파라미터 등) 제거로 깔끔한 표시
- `build_metric_table()` 함수에서 과목별/연도별 점수 자동 계산

#### 3. CPA 종합 Top10 개선 ✅
**문제**: CPA 종합 점수가 제대로 계산/표시되지 않음

**해결**:
- `metric_series()` 함수로 subject 및 year 필터링
- `build_metric_table()`에서 CPA 과목별 점수 분리 계산
- Top 10 차트에 세법종합, CPA종합 표시

#### 4. AI허브 리더보드 스타일 적용 ✅
**참고**: https://www.aihub.or.kr/leaderboard/view.do

**적용**:
- **Pretendard 폰트**: 전체 UI에 적용
- **그라디언트 Hero**: 보라색(#667eea → #764ba2) 그라디언트
- **네비게이션**: 깔끔한 탭 스타일
- **알림 박스**: 파란색 border-left 강조
- **메트릭 카드**: 호버 효과, 그림자
- **차트**: 둥근 모서리, 부드러운 색상
- **반응형**: 1400px → 1600px (wide screen)

#### 5. 오답 분석 페이지 개선 ✅
**기존**: 단순 목록 + 키워드 차트

**개선**:
- **2단 레이아웃**: 키워드 분석 + 분포 차트
- **과목별 오답 분포**: CPA의 경우 파이 차트
- **연도별 오답 분포**: 개정세법의 경우 바 차트
- **오답 목록 테이블**: 문제/정답/모델답변 간결 표시
- **상세 보기**: Expander로 각 문항 상세 분석
- **CSV 다운로드**: 모델명 기반 파일명

#### 6. 첫 페이지 디자인 개선 ✅
**Hero 섹션**:
```
🏛️ Fiscal Leaderboard
한국어 LLM의 세법 및 회계 전문 지식을 평가하는 벤치마크 플랫폼
```

**네비게이션**:
- CPA 리더보드 / 개정세법 리더보드
- 깔끔한 pill 스타일 버튼

**알림**:
- 파란색 박스로 플랫폼 설명

**필터**:
- 📊 벤치마크 / 📈 평가지표
- 고급 필터는 Expander 안에

#### 7. 내부 오답분석 페이지 재구성 ✅
**레이아웃**:
- 상단: 통계 카드 (정답률, 정답수, 오답수, 전체문항)
- 중단: 2단 레이아웃 (키워드 분석 + 오답 분포)
- 하단: 오답 목록 테이블 + CSV 다운로드
- Expander: 오답 상세 보기

**시각화**:
- 오답 키워드 Top 10 (가로 막대)
- CPA 과목별 오답 (파이 차트)
- 개정세법 연도별 오답 (막대 차트)

### 🔧 기술적 개선

#### 코드 구조
- `CPA_SUBJECTS`: 과목 매핑 딕셔너리
- `TAX_YEARS`: 개정세법 연도 목록
- `build_metric_table()`: 과목별/연도별 점수 계산 로직
- `smart_label()`: 모델명 간결화 로직
- `render_leaderboard_section()`: 리더보드 렌더링
- `render_error_section()`: 오답 분석 렌더링
- `render_analysis_section()`: 상세 분석 렌더링

#### 스타일 개선
- CSS 전면 재작성
- Pretendard 폰트 적용
- 그라디언트 배경
- 카드 호버 효과
- 부드러운 애니메이션

#### 데이터 개선
- `model_metadata.json`에 신규 모델 추가:
  - kakaocorp/kanana-2-30b-a3b-thinking-2601
  - LGAI-EXAONE/EXAONE-3.5-32B-Instruct
  - naver-hyperclovax/HyperCLOVAX-SEED-Think-14B
  - openai/gpt-oss-120b

#### Deprecation 해결
- `use_container_width=True` → `width='stretch'`
- Streamlit 1.41.1 호환

### 📊 결과

#### 개선 전
- 모델명 잘림
- Qwen 모델 구분 불가
- 단순한 테이블
- 기본 디자인
- 제한적 분석

#### 개선 후
- ✅ 모델명 전체 표시
- ✅ 모든 모델 고유 식별
- ✅ 과목별/연도별 점수 카드
- ✅ AI허브 수준 디자인
- ✅ 풍부한 시각화 및 분석

### 🎨 디자인 특징

- **컬러**: 보라색 계열 (#667eea, #764ba2)
- **폰트**: Pretendard
- **레이아웃**: 2단 + 카드 그리드
- **애니메이션**: 호버 효과, translateY
- **반응형**: 1400px ~ 1600px

### 📝 문서화

- README.md 업데이트
- CHANGELOG.md 추가
- 코드 주석 추가

---

## v1.0 (초기 버전)

- 기본 리더보드 기능
- Pass@k 평가
- 모델 메타데이터
- 오답 분석 (기본)
- Altair 차트
